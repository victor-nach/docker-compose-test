{"version":3,"sources":["../src/server.js"],"names":["app","use","bodyParser","json","type","disable","errorHandler","ErrorHandler","err","req","res","next","validator","name","code","setHandler","validationHandler","stack","status","message","stackTrace","middleware"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;;AAEA;AACAA,IAAIC,GAAJ,CAAQ,qBAAR;AACAD,IAAIC,GAAJ,CAAQC,qBAAWC,IAAX,CAAgB,EAACC,MAAM,kBAAP,EAAhB,CAAR;AACAJ,IAAIK,OAAJ,CAAY,MAAZ;;AAEAL,IAAIC,GAAJ,CAAQ,QAAR,EAAkB,uBAAlB;;AAEA,IAAMK,eAAe,IAAIC,6BAAJ,EAArB;;AAEA;AACAP,IAAIC,GAAJ,CAAQ,UAACO,GAAD,EAAMC,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,EAAyB;AAC/B,MAAIH,IAAII,SAAR,EAAmB;AACjBJ,QAAIK,IAAJ,GAAW,iBAAX;AACAL,QAAIM,IAAJ,GAAW,GAAX;AACD;AACDH,OAAKH,GAAL;AACD,CAND;;AAQAF,aAAaS,UAAb,CAAwB,iBAAxB,EAA2C,SAASC,iBAAT,CAA4BR,GAA5B,EAAiCS,KAAjC,EAAwC;AACjF,MAAMP,MAAM,EAAZ;AACAA,MAAIQ,MAAJ,GAAa,OAAb;AACAR,MAAIS,OAAJ,iCAA0CX,IAAIW,OAA9C;AACAT,MAAII,IAAJ,GAAWN,IAAIM,IAAf;AACA,MAAIG,KAAJ,EAAWP,IAAIU,UAAJ,GAAiBZ,IAAIS,KAArB;AACX,SAAOP,GAAP;AACD,CAPD;;AASAV,IAAIC,GAAJ,CAAQK,aAAae,UAAb,EAAR;;kBAEerB,G","file":"server.js","sourcesContent":["import express from 'express';\nimport bodyParser from 'body-parser';\nimport cors from 'cors';\nimport ErrorHandler from 'express-simple-errors';\nimport routes from './todos/routes';\n\nconst app = express();\n\n// app middleware\napp.use(cors());\napp.use(bodyParser.json({type: 'application/json'}));\napp.disable('etag');\n\napp.use('/todos', routes());\n\nconst errorHandler = new ErrorHandler();\n\n// validation errors are not typed correctly - changing here\napp.use((err, req, res, next) => {\n  if (err.validator) {\n    err.name = 'ValidationError';\n    err.code = 400;\n  }\n  next(err);\n});\n\nerrorHandler.setHandler('ValidationError', function validationHandler (err, stack) {\n  const res = {};\n  res.status = 'Error';\n  res.message = `Schema Validation Error: ${err.message}`;\n  res.code = err.code;\n  if (stack) res.stackTrace = err.stack;\n  return res;\n});\n\napp.use(errorHandler.middleware());\n\nexport default app;\n"]}